<!-- Calling the Query, to populate the table we are going to create -->
{{#context}}
  {
    "icacert": {
      "collection": "issuing-i-ca",
      "query": {},
      "hints": {"$orderby":{"Member": 1}}
    }
  }
{{/context}}

<html>
<head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <title>WBA Issuing I-CA Certificate Database</title>
  
</head>
<!-- Table Fonts and border settings -->
<style>

#icacerts {
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

#icacerts td, #icacerts th {
  border: 1px solid #ddd;
  padding: 8px;
}

#icacerts tr:nth-child(even){background-color: #f2f2f2;}

#icacerts tr:hover {background-color: #ddd;}

#icacerts th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  background-color: #4CAF50;
  color: white;
}

</style>

<body onload='main()'>
  <img src="https://wballiance.com/wp-content/uploads/2019/05/wbalogo2019.png" alt="WBA Logo">
  </p>
  <h2 style="font-family:Arial;">WBA Issuing I-CA Certificate Database</h2>
  <h3 style="font-family:Arial;">This database is managed by WBA PMO staff. It will be updated when WBA arranges the signing of a new Issuing I-CA certificate by WBA's policy I-CA.</h2>
  <p>

  <table id="icacerts">
    <tr>
      <th>Organization</th>
      <th>Country</th>
      <th>Issued By</th>
      <th>Valid From</th>
      <th>Valid To</th>
      <th>Serial No.</th>
      <th>Policy OID</th>
    </tr>
    {{#each icacert}}
      <tr>
          <!-- Data within a table format -->
        <td>{{this.[subjectDnO]}}</td>
        <td>{{this.[subjectDnC]}}</td>
        <td>{{this.[issuerDnO]}} {{this.[issuerDnC]}}</td>
        <td>{{this.[validNotBefore]}}</td>
        <td>{{this.[validNotAfter]}}</td>
        <td>{{this.[serialNumber]}}</td>
        <td>{{this.[certPolicyOid]}}</td>
      </tr>
    {{/each}}
  </table>
</body>
</html>
